{"version":3,"sources":["App.js","index.js"],"names":["override","css","_templateObject","metaMaskNotInstalled","react_default","a","createElement","style","marginTop","className","href","target","wrongNetwork","App","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","isConnected","correctNetwork","currentNumber","currentPrice","newNumber","loading","show","window","web3","Web3","currentProvider","version","getNetwork","err","res","setState","contract","onChange","bind","assertThisInitialized","onSubmit","handleDismiss","handleShow","_this2","eth","accounts","length","ABI","at","defaultAccount","getCurrentNumber","getCurrentPrice","watch","args","_number","toNumber","document","getElementById","display","_this3","number","_this4","price","fromWei","e","value","_this5","preventDefault","currentPriceinWei","toWei","setNumber","from","gas","id","fontSize","fontFamily","react_spinners","color","Alert","bsStyle","onDismiss","Button","onClick","htmlFor","type","min","placeholder","Component","ReactDOM","render","src_App_0"],"mappings":"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","file":"static/js/main.5eac0edf.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport Web3 from 'web3'\r\nimport ABI from './contract/ABI.json'\r\nimport { DotLoader } from 'react-spinners'\r\nimport { css } from 'react-emotion'\r\nimport { Alert, Button } from 'react-bootstrap'\r\nimport './App.css'\r\n\r\nconst override = css`\r\n    display: block;\r\n    margin: 0 auto;\r\n    border-color: red;\r\n`\r\n\r\nconst address = '0xb86CE7CE17E82eF7cab5ed8a86B736A494fE3935'\r\n\r\nconst metaMaskNotInstalled = (\r\n  <div style={{marginTop: '25px'}} className=\"container\">\r\n    <div className=\"row justify-content-center\">\r\n      <div className=\"col-md-8\">\r\n        <h1>Please install MetaMask or log in ir order to use this website</h1>\r\n        <a href=\"https://metamask.io/\" target=\"blank\">Click here to install</a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n)\r\n\r\nconst wrongNetwork = (\r\n  <div style={{marginTop: '25px'}} className=\"container\">\r\n    <div className=\"row justify-content-center\">\r\n      <div className=\"col-md-8\">\r\n        <h1>Please login on ethereum mainnet</h1>\r\n      </div>\r\n    </div>\r\n  </div>\r\n)\r\n\r\nclass App extends Component {\r\n\r\n  constructor() {\r\n    super()\r\n\r\n    this.state = {\r\n      isConnected: false,\r\n      correctNetwork: false,\r\n      currentNumber: '',\r\n      currentPrice: '',\r\n      newNumber: '',\r\n      loading: false,\r\n      show: false,\r\n    }\r\n\r\n    if (typeof window.web3 !== 'undefined')\r\n      this.web3 = new Web3(window.web3.currentProvider)\r\n    //else\r\n      //this.web3 = new Web3(new Web3.providers.HttpProvider('https://ropsten.infura.io/v3/dc6b700a39d540469573d509928ceb46'))\r\n\r\n    this.web3.version.getNetwork((err, res) => res === '1' ? this.setState({\r\n      correctNetwork: true\r\n    }): '')\r\n    \r\n    this.contract = ''\r\n    this.onChange = this.onChange.bind(this)\r\n    this.onSubmit = this.onSubmit.bind(this)\r\n    this.handleDismiss = this.handleDismiss.bind(this)\r\n    this.handleShow = this.handleShow.bind(this)\r\n  }\r\n\r\n  componentWillMount() {\r\n    if (this.web3 && this.web3.isConnected() && this.web3.eth.accounts.length > 0) {\r\n      \r\n      this.setState({isConnected: true})\r\n      this.contract = this.web3.eth.contract(ABI).at(address)\r\n      this.web3.eth.defaultAccount = this.web3.eth.accounts[0]\r\n\r\n      this.getCurrentNumber()\r\n      this.getCurrentPrice()\r\n\r\n      this.contract.newNumber().watch((err, res) => {\r\n        if (!err) {\r\n          this.setState({currentNumber: res.args._number.toNumber()})\r\n          this.getCurrentPrice()\r\n        }\r\n        \r\n        document.getElementById(\"overlay\").style.display = \"none\"\r\n        this.setState({loading: false})\r\n      })\r\n    }\r\n  }\r\n\r\n  getCurrentNumber() {\r\n    this.contract.number((err, res) => {\r\n      if (err)\r\n        this.setState({currentNumber: 'Unavailable'})\r\n      \r\n      this.setState({currentNumber: res.toNumber()})\r\n    })\r\n  }\r\n\r\n  getCurrentPrice() {\r\n    this.contract.price((err, res) => {\r\n      if (err)\r\n        this.setState({currentPrice: 'Unavailable'})\r\n      this.setState({currentPrice: this.web3.fromWei(res.toNumber(), \"ether\")})\r\n    })\r\n  }\r\n\r\n  onChange(e) {\r\n    this.setState({ newNumber: e.target.value })\r\n  }\r\n\r\n  onSubmit(e) {\r\n    e.preventDefault()\r\n    document.getElementById(\"overlay\").style.display = \"block\"\r\n    this.setState({loading: true})\r\n\r\n    let currentPriceinWei = this.web3.toWei(this.state.currentPrice, \"ether\")\r\n    \r\n    this.contract.setNumber(this.state.newNumber, \r\n      {from: this.web3.eth.defaultAccount, value:  currentPriceinWei, gas: 300000}, (err, res) => {\r\n        if (err && this.state.loading) {\r\n          this.setState({loading: false})\r\n          document.getElementById(\"overlay\").style.display = \"none\"\r\n          this.handleShow()\r\n        }\r\n      }\r\n    )\r\n    \r\n    this.setState({newNumber: ''})\r\n  }\r\n\r\n  handleShow() {\r\n    this.setState({ show: true })\r\n  }\r\n\r\n  handleDismiss() {\r\n    this.setState({ show: false })\r\n  }\r\n\r\n  render() {\r\n    \r\n    if (!this.state.isConnected)\r\n      return metaMaskNotInstalled\r\n    else if (!this.state.correctNetwork)\r\n      return wrongNetwork\r\n    else\r\n    return (\r\n      <header>\r\n        <div className=\"sun\"></div>\r\n        <div className=\"cloud c1\"></div>\r\n        <div className=\"cloud c2\"></div>\r\n        <div className=\"cloud c3\"></div>\r\n        <div className=\"cloud c4\"></div>\r\n        <div className=\"cloud c5\"></div>\r\n        <div className=\"day\"></div>  \r\n        <div className=\"moon\"></div>          \r\n        <div className=\"horizon\"></div>      \r\n\r\n        <div className=\"walk\"></div>\r\n        \r\n        <h1>\r\n          <div className=\"block\">\r\n            <div className=\"row justify-content-center\">\r\n              <div className=\"col-md-4\">\r\n                <div id=\"overlay\">\r\n                  <div id=\"text\">\r\n                    <span style={{fontSize: '16px', fontFamily: 'Cursive'}}>Transactions on blockchain might take a while\r\n                    Please wait...</span>\r\n                    <DotLoader\r\n                      className={override}\r\n                      loading={this.state.loading}\r\n                      color={'#fff'}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"row justify-content-center\">\r\n              <div className=\"col-md-4\">\r\n                {\r\n                  this.state.show ?\r\n                    (\r\n                      <Alert bsStyle=\"danger\" onDismiss={this.handleDismiss}>\r\n                        <h4>Oh snap! You got an error!</h4>\r\n                        <p>Change this and that and try again.</p>\r\n                        <p><Button className='btn btn-info btn-block mt-4' onClick={this.handleDismiss}>Hide Alert</Button></p>\r\n                      </Alert>\r\n                    ) : ''\r\n                }\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"row justify-content-center\">\r\n              <div className=\"col-md-4\">\r\n                <form onSubmit={this.onSubmit}>\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"number\"></label>\r\n                    <input \r\n                      value={this.state.newNumber}\r\n                      onChange={this.onChange}\r\n                      type=\"number\" \r\n                      min=\"0\" \r\n                      className=\"form-control\" \r\n                      id=\"number\" \r\n                      placeholder=\"Type your number\"\r\n                    />\r\n                    <small id=\"number\" style={{fontSize: '11px'}} className=\"form-text text-muted\">Your number is now safe.</small>\r\n                  </div>\r\n              \r\n                  <button type=\"submit\" className=\"btn btn-info btn-block\">Save!</button>\r\n                </form>\r\n                <div style={{fontSize: '16px', fontFamily: 'cursive'}}>Current Number: &nbsp;  {this.state.currentNumber}</div>\r\n                <div style={{fontSize: '10px', fontFamily: 'cursive', marginTop: '5px'}} >Current Price: &nbsp; {this.state.currentPrice} ETH</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"row justify-content-center\">\r\n            <span style={{fontSize: '14px', marginTop: '25px', fontFamily: 'cursive'}}>Save your favorite number on ethereum blockchain!</span>\r\n          </div>\r\n        </h1>\r\n      </header>\r\n\r\n    )\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n    <App />, \r\n    document.getElementById('root')\r\n)\r\n"],"sourceRoot":""}